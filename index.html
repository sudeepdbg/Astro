<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nadi Jyotish | Ancient Celestial Secrets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Montserrat:wght@300;400;600&family=Cormorant+Garamond:ital,wght@0,500;1,500&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #d4af37;
            --dark-obsidian: #050505;
        }
        body { 
            font-family: 'Montserrat', sans-serif; 
            background-color: var(--dark-obsidian);
            color: #e5e5e5;
        }
        .serif-title { font-family: 'Cinzel Decorative', cursive; }
        .nadi-scroll { font-family: 'Cormorant Garamond', serif; }

        /* Mystic Background */
        .cosmic-bg {
            background: radial-gradient(circle at 50% 50%, #1a1a2e 0%, #050505 100%);
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        }
        
        .gold-border {
            border: 1px solid transparent;
            background: linear-gradient(var(--dark-obsidian), var(--dark-obsidian)) padding-box,
                        linear-gradient(to bottom right, #bf953f, #fcf6ba, #b38728) border-box;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(212, 175, 55, 0.1);
        }

        .gold-text {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .float-icon { animation: float 4s ease-in-out infinite; }
    </style>
</head>
<body class="min-h-screen">
    <div class="cosmic-bg"></div>

    <div class="max-w-4xl mx-auto px-6 py-12">
        
        <header class="text-center mb-16">
            <img src="https://cdn-icons-png.flaticon.com/512/2361/2361730.png" class="w-16 h-16 mx-auto mb-4 filter sepia opacity-80 float-icon" alt="Ohm">
            <h1 class="serif-title text-4xl md:text-6xl gold-text tracking-tighter mb-4">Nadi Jyotish</h1>
            <p class="text-sm tracking-[0.3em] text-gray-500 uppercase">Your Cosmic Blueprint Awaits</p>
        </header>

        <div class="glass-card rounded-3xl p-8 md:p-12 gold-border transition-all duration-500">
            <form id="astrologyForm" class="space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="relative">
                        <label class="text-xs uppercase tracking-widest text-amber-500 mb-2 block">Seeker's Name</label>
                        <input type="text" id="name" required class="w-full bg-transparent border-b border-gray-800 py-3 text-lg outline-none focus:border-amber-500 transition-colors" placeholder="Full Name">
                    </div>
                    <div class="relative">
                        <label class="text-xs uppercase tracking-widest text-amber-500 mb-2 block">Language</label>
                        <select id="language" class="w-full bg-transparent border-b border-gray-800 py-3 text-lg outline-none focus:border-amber-500 transition-colors">
                            <option value="English" class="bg-black">English</option>
                            <option value="Hindi" class="bg-black">Hindi (हिन्दी)</option>
                        </select>
                    </div>
                    <div class="relative">
                        <label class="text-xs uppercase tracking-widest text-amber-500 mb-2 block">Birth Date</label>
                        <input type="date" id="date" required class="w-full bg-transparent border-b border-gray-800 py-3 text-lg outline-none focus:border-amber-500 transition-colors">
                    </div>
                    <div class="relative">
                        <label class="text-xs uppercase tracking-widest text-amber-500 mb-2 block">Birth Time</label>
                        <input type="time" id="time" required class="w-full bg-transparent border-b border-gray-800 py-3 text-lg outline-none focus:border-amber-500 transition-colors">
                    </div>
                </div>

                <div class="relative">
                    <label class="text-xs uppercase tracking-widest text-amber-500 mb-2 block">Birth Location</label>
                    <input type="text" id="location" required class="w-full bg-transparent border-b border-gray-800 py-3 text-lg outline-none focus:border-amber-500 transition-colors" placeholder="City, Country">
                </div>

                <button type="submit" id="submitBtn" class="w-full py-5 rounded-full bg-gradient-to-r from-amber-700 via-amber-500 to-amber-700 text-black font-bold uppercase tracking-widest hover:brightness-110 transition-all shadow-lg shadow-amber-900/20">
                    ✨ Unveil Destiny
                </button>
            </form>
        </div>

        <div id="resultArea" class="hidden mt-12 space-y-6">
            <div class="glass-card rounded-3xl p-8 md:p-12 border border-amber-500/20 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-8 opacity-5">
                    <h1 class="serif-title text-9xl">NADI</h1>
                </div>
                
                <h2 class="serif-title text-2xl text-amber-500 mb-6">Celestial Proclamation</h2>
                <div id="predictionContent" class="nadi-scroll text-xl md:text-2xl leading-relaxed italic text-gray-300">
                    </div>

                <div class="mt-10 grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="p-4 rounded-2xl bg-white/5 text-center">
                        <span class="text-[10px] uppercase text-amber-600 block">Moon Sign</span>
                        <span id="moonSign" class="font-bold text-amber-100 italic">--</span>
                    </div>
                    <div class="p-4 rounded-2xl bg-white/5 text-center">
                        <span class="text-[10px] uppercase text-amber-600 block">Nakshatra</span>
                        <span id="nakshatra" class="font-bold text-amber-100 italic">--</span>
                    </div>
                </div>
            </div>
        </div>

        <footer class="mt-20 text-center text-gray-600 text-[10px] uppercase tracking-[0.5em]">
            &copy; 2026 Nadi Astrology Hub • For Spiritual Guidance Only
        </footer>
    </div>

    <script>
        // Automatic Backend Detection
        const BACKEND_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? "http://127.0.0.1:8000" 
            : "https://your-railway-app-name.up.railway.app"; 

        const form = document.getElementById('astrologyForm');
        const btn = document.getElementById('submitBtn');
        const resultArea = document.getElementById('resultArea');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            btn.disabled = true;
            btn.innerHTML = "Consulting the Heavens...";
            resultArea.classList.add('hidden');

            const payload = {
                name: document.getElementById('name').value,
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                location: document.getElementById('location').value,
                language: document.getElementById('language').value
            };

            try {
                const response = await fetch(`${BACKEND_URL}/predict`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error('Celestial connection lost.');

                const data = await response.json();
                
                document.getElementById('predictionContent').innerText = data.prediction;
                document.getElementById('moonSign').innerText = data.moon_sign_hindi || data.moon_sign;
                
                const moonData = data.planetary_positions.find(p => p.planet === 'Moon');
                document.getElementById('nakshatra').innerText = moonData ? (moonData.nakshatra_hindi || moonData.nakshatra) : 'N/A';

                resultArea.classList.remove('hidden');
                resultArea.scrollIntoView({ behavior: 'smooth' });
            } catch (err) {
                alert("Error: " + err.message);
            } finally {
                btn.disabled = false;
                btn.innerHTML = "✨ Unveil Destiny";
            }
        });
    </script>
</body>
</html>
